<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
  "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html lang="it" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:dcat="http://vocab.deri.ie/dcat.rdf/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
  xmlns:owl="http://www.w3.org/2002/07/owl#"
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:rss="http://purl.org/rss/1.0/"
  xmlns:site="http://www.spaghettiopendata.org/ns#"
  xmlns:schema="http://schema.org/">
<head profile="http://www.w3.org/1999/xhtml/vocab">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta property="og:site_name" content="Spaghetti Open Data" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://www.spaghettiopendata.org/blog/pjhooker/c-chi-va-e-c-chi-viene-matrice-origine-destinazione" />
<link rel="shortcut icon" href="http://www.spaghettiopendata.org/sites/all/themes/sod3_bootstrap/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="shortlink" href="http://www.spaghettiopendata.org/node/207" />
<link rel="canonical" href="http://www.spaghettiopendata.org/blog/pjhooker/c-chi-va-e-c-chi-viene-matrice-origine-destinazione" />
<meta name="description" content="Nell’Aprile 2015, la Regione Lombardia ha pubblicato un nuovo dataset, intolato Matrice OD2014 che può essere scaricato dal Geoportale OpenData della Regione qui." />
<meta property="og:title" content="C’è chi va e c’è chi viene: matrice origine-destinazione" />
<meta property="og:description" content="Nell’Aprile 2015, la Regione Lombardia ha pubblicato un nuovo dataset, intolato Matrice OD2014 che può essere scaricato dal Geoportale OpenData della Regione qui." />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
  <title>C’è chi va e c’è chi viene: matrice origine-destinazione | Spaghetti Open Data</title>
  <link type="text/css" rel="stylesheet" href="http://www.spaghettiopendata.org/sites/default/files/css/css_lQaZfjVpwP_oGNqdtWCSpJT1EMqXdMiU84ekLLxQnc4.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://www.spaghettiopendata.org/sites/default/files/css/css_Krv2lsDiRe0RpHVCfHNzZcy-xh1jpFJW9dPkOJ8J7FE.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://www.spaghettiopendata.org/sites/default/files/css/css_kX1d5LrmIJ2geQ8Pjw4barVU9JIeO0Lo79UouLYqf_U.css" media="all" />
<link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cerulean/bootstrap.min.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://www.spaghettiopendata.org/sites/default/files/css/css_g6U6EwXzM2Jt8kacTS8MPdb4CEqzJ0bsrkHRe8WfEQw.css" media="all" />
  <!-- HTML5 element support for IE6-8 -->
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="http://www.spaghettiopendata.org/sites/default/files/js/js_jpJjaUC0z8JMIyav5oQrYykDRUb64rpaUDpB4Y9aklU.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
<script src="http://www.spaghettiopendata.org/sites/default/files/js/js_R9UbiVw2xuTUI0GZoaqMDOdX0lrZtgX-ono8RVOUEVc.js"></script>
<script src="http://www.spaghettiopendata.org/sites/default/files/js/js_QDXevDQUHVzZMDomLWFovPGOvjb39NStLwsu8L03TvI.js"></script>
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create", "UA-37620039-1", {"cookieDomain":"auto"});ga("send", "pageview");</script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"sod3_bootstrap","theme_token":"9-UabTkLyr29hmm_Lo89y9dw-Y9K-Zac2J-J1I9-7TY","js":{"sites\/all\/themes\/bootstrap\/js\/bootstrap.js":1,"sites\/all\/modules\/contrib\/jquery_update\/replace\/jquery\/1.7\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"\/\/netdna.bootstrapcdn.com\/bootstrap\/3.0.2\/js\/bootstrap.min.js":1,"sites\/all\/modules\/contrib\/admin_menu\/admin_devel\/admin_devel.js":1,"public:\/\/languages\/it__kFqB28HWmqctT6vvCycgucpWPXQeOGk8eIVBrBvAbU.js":1,"sites\/all\/modules\/contrib\/panels\/js\/panels.js":1,"sites\/all\/libraries\/superfish\/jquery.hoverIntent.minified.js":1,"sites\/all\/libraries\/superfish\/jquery.bgiframe.min.js":1,"sites\/all\/libraries\/superfish\/superfish.js":1,"sites\/all\/libraries\/superfish\/supersubs.js":1,"sites\/all\/libraries\/superfish\/supposition.js":1,"sites\/all\/libraries\/superfish\/sftouchscreen.js":1,"sites\/all\/modules\/contrib\/google_analytics\/googleanalytics.js":1,"0":1},"css":{"modules\/system\/system.base.css":1,"modules\/field\/theme\/field.css":1,"sites\/all\/modules\/contrib\/mollom\/mollom.css":1,"sites\/all\/modules\/contrib\/views\/css\/views.css":1,"sites\/all\/modules\/contrib\/ckeditor\/css\/ckeditor.css":1,"sites\/all\/modules\/contrib\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/libraries\/superfish\/css\/superfish.css":1,"sites\/all\/libraries\/superfish\/css\/superfish-vertical.css":1,"sites\/all\/libraries\/superfish\/css\/superfish-navbar.css":1,"\/\/netdna.bootstrapcdn.com\/bootswatch\/3.0.2\/cerulean\/bootstrap.min.css":1,"sites\/all\/themes\/bootstrap\/css\/overrides.css":1,"sites\/all\/themes\/sod3_bootstrap\/css\/style.css":1}},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"urlIsAjaxTrusted":{"\/blog\/pjhooker\/c-chi-va-e-c-chi-viene-matrice-origine-destinazione?destination=node\/207":true},"bootstrap":{"anchorsFix":1,"anchorsSmoothScrolling":1,"popoverEnabled":1,"popoverOptions":{"animation":1,"html":0,"placement":"right","selector":"","trigger":"click","title":"","content":"","delay":0,"container":"body"},"tooltipEnabled":1,"tooltipOptions":{"animation":1,"html":0,"placement":"auto left","selector":"","trigger":"hover focus","delay":0,"container":"body"}}});</script>
</head>
<body class="html not-front not-logged-in one-sidebar sidebar-first page-node page-node- page-node-207 node-type-blog i18n-it" >
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Salta al contenuto principale</a>
  </div>
    <header id="navbar" role="banner" class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      
            <a class="name navbar-brand" href="/" title="Home">Spaghetti Open Data</a>
      
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

          <div class="navbar-collapse collapse">
        <nav role="navigation">
                      <ul class="menu nav navbar-nav"><li class="first leaf"><a href="/home">Home</a></li>
<li class="collapsed"><a href="/page/cos-e-chi-siamo">Cos&#039;è e chi siamo</a></li>
<li class="leaf"><a href="/page/netiquette-ovvero-le-regole-di-comportamento">Netiquette</a></li>
<li class="collapsed"><a href="/community" title="Community utenti">Community</a></li>
<li class="leaf"><a href="/page/sod-merge-it-2018">SOD a MERGE-it 2018</a></li>
<li class="collapsed"><a href="/page/altri-raduni-cosa-abbiamo-fatto">Altri raduni</a></li>
<li class="leaf"><a href="/page/si-parla-di-sod-ovvero-una-sorta-di-rassegna-stampa" title="Dove si parla di SOD in Rete, dalla rassegna stampa dei raduni, a tutto il resto che ci cita">Si parla di SOD</a></li>
<li class="leaf"><a href="/page/contatti">Contatti</a></li>
<li class="last leaf"><a href="/page/aiuto">Aiuto</a></li>
</ul>                                      </nav>
      </div>
      </div>
</header>

<div class="main-container container">

  <header role="banner" id="page-header">
    
      </header> <!-- /#page-header -->

  <div class="row">

          <aside class="col-sm-3" role="complementary">
          <div class="region region-sidebar-first well">
    <section id="block-user-login" class="block block-user clearfix">

        <h2 class="block-title">Accesso utente</h2>
    
  <form action="/blog/pjhooker/c-chi-va-e-c-chi-viene-matrice-origine-destinazione?destination=node/207" method="post" id="user-login-form" accept-charset="UTF-8"><div><div class="form-type-textfield form-item-name form-item form-group">
  <label for="edit-name">Nome utente <span class="form-required" title="Questo campo è obbligatorio.">*</span></label>
 <input class="form-control form-text required" type="text" id="edit-name" name="name" value="" size="15" maxlength="60" />
</div>
<div class="form-type-password form-item-pass form-item form-group">
  <label for="edit-pass">Password <span class="form-required" title="Questo campo è obbligatorio.">*</span></label>
 <input class="form-control form-text required" type="password" id="edit-pass" name="pass" size="15" maxlength="128" />
</div>
<ul><li class="first"><a href="/user/register" title="Crea un nuovo profilo utente.">Crea nuovo profilo</a></li>
<li class="last"><a href="/user/password" title="Richiedi una nuova password tramite e-mail.">Richiedi nuova password</a></li>
</ul><input type="hidden" name="form_build_id" value="form-I6wBAR8hTytdxrEOVCw4YZLe3nb33mGM78gzrzeMgYo" />
<input type="hidden" name="form_id" value="user_login_block" />
<button class="btn btn-default form-submit" id="edit-submit" name="op" value="Accedi" type="submit">Accedi</button>
</div></form>
</section> <!-- /.block -->
  </div>
      </aside>  <!-- /#sidebar-first -->
    
    <section class="col-sm-9">
            <ol class="breadcrumb"><li class="first"><a href="/">Home</a></li>
<li><a href="/blog">Blog</a></li>
<li><a href="/blogs/pjhooker">Blog di pjhooker</a></li>
<li class="active last">C’è chi va e c’è chi viene: matrice origine-destinazione</li>
</ol>      <a id="main-content"></a>
                    <h1 class="page-header">C’è chi va e c’è chi viene: matrice origine-destinazione</h1>
                                                          <div class="region region-content">
    <section id="block-system-main" class="block block-system clearfix">

      
  <article id="node-207" class="node node-blog clearfix" about="/blog/pjhooker/c-chi-va-e-c-chi-viene-matrice-origine-destinazione" typeof="sioc:Post sioct:BlogPost">


  <header>
            <span property="dc:title" content="C’è chi va e c’è chi viene: matrice origine-destinazione" class="rdf-meta element-hidden"></span><span property="sioc:num_replies" content="0" datatype="xsd:integer" class="rdf-meta element-hidden"></span>
          <span class="submitted">
                <span property="dc:date dc:created" content="2015-09-21T10:48:07+02:00" datatype="xsd:dateTime" rel="sioc:has_creator">Inviato da <a href="/users/pjhooker" title="Visualizza profilo utente." class="username" xml:lang="" about="/users/pjhooker" typeof="schema:Person sioc:UserAccount" property="schema:name" datatype="">pjhooker</a> il Lun, 09/21/2015 - 10:48</span>      </span>
    
          <!-- AddThis Button BEGIN -->
      <div class="addthis_toolbox addthis_default_style" style="margin-top: 10px;">
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
      <a class="addthis_button_google_plusone" g:plusone:annotation="bubble"></a>
      <a class="addthis_button_tweet"></a>
      <a class="addthis_button_pinterest_pinit"></a>
      <a class="addthis_counter addthis_pill_style"></a>
      </div>
      <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
      <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>
      <!-- AddThis Button END -->
    

  </header>

  <div class="field field-name-field-immagine-blog-entry field-type-image field-label-hidden"><div class="field-items"><div class="field-item even"><img typeof="foaf:Image" src="http://www.spaghettiopendata.org/sites/default/files/20998640705_6e407c28a2_h-e1442062032472-825x510.jpg" width="825" height="510" alt="" /></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>Nell’Aprile 2015, la Regione Lombardia ha pubblicato un nuovo dataset, intolato <a href="http://www.trasporti.regione.lombardia.it/cs/Satellite?c=Redazionale_P&amp;childpagename=DG_Infrastrutture%2FDetail&amp;cid=1213723582482&amp;pagename=DG_INFWrapper" target="_blank">Matrice OD2014</a> che può essere scaricato dal Geoportale OpenData della Regione <a href="https://www.dati.lombardia.it/Mobilit-e-trasporti/Matrice-OD2014-file-compresso-per-download-rapido-/wy2j-jc9m" target="_blank">qui</a>.<br />
Questo dataset, contiene un numero di identità che si spostano da un comune A ad un comune B, diviso temporalemnte ed in base al mezzo utilizzato.</p>
<blockquote><p>
	Matrice regionale Origine Destinazione degli spostamenti distinti per origine, destinazione, fascia oraria, motivo e modo prevalente dello spostamento.
</p></blockquote>
<p><a href="http://www.cityplanner.it/wp-content/uploads/2015/09/20150912_Selezione_001.jpg"><img alt="Matrice OD2014" src="http://www.cityplanner.it/wp-content/uploads/2015/09/20150912_Selezione_001.jpg" width="100%" /></a><br />
Come si evince fin dalla favicon del portale, la Regione ha scelto la piattaforma <a href="http://www.socrata.com/" target="_blank">Socrata</a> che ha sua volta è un portale dove vengono archiviati i dati ed in particolar modo gli opendata. Molte città nel mondo utilizzano questo portale e si nota subito la qualità.<br />
Socrata mette a disposizione una <a href="http://dev.socrata.com/" target="_blank">piattaforma di sviluppo</a> da cui si possono estrarre i dati, senza doverli archiviare sul proprio server, mediante le cosidette <a href="https://it.wikipedia.org/wiki/Application_programming_interface" target="_blank">API</a>. Il modello di richiesta è abbastanza semplice, si tratta di un indirizzo url, che se richiamato nel browser, restituisce i dati in formato JSON:<br /><code><a href="https://data.ct.gov/resource/hma6-9xbg.json?category=Fruit&amp;item=Peaches" target="_blank">https://data.ct.gov/resource/hma6-9xbg.json?category=Fruit&amp;item=Peaches</a></code><br />
Così ho iniziato ad ispezionare la struttura del dato e ho iniziato a fare qualche query sulla MatriceOD, con dei codici jQuery. Ho unito i risultati su una mappa LeafletJS e lavorato un po’ sullo stile: il risultato lo vedete nell’immagine in copertina.<br />
Questo sistema, di visualizzazione, che partiva con un filtro “destinazione:milano” è già pronte ad ospitare la funzione che cliccando su una origine, facesse diventare questa la destinazione, rigenerando il grafico.<br />
Aver organizzato bene le query fin dall’inizio, semplicemente aggiungendo la funzione all’evento click, il grafico si rigenera, con una velocità decisamente buona.</p>
<p>		<a href="http://www.cityplanner.it/wp-content/uploads/2015/09/20150912_Selezione_004.jpg"><img alt="matriceOD Legnano-Busto Arsizio" class="aligncenter size-full wp-image-5202" height="800" src="http://www.cityplanner.it/wp-content/uploads/2015/09/20150912_Selezione_004.jpg" width="800" /></a></p>
<p>		 </p>
<p>		 </p>
<p>Infine ho inserito una tabella per la consultazione dei dati grezzi. Ho utilizzato la libreria <a href="https://www.datatables.net/" target="_blank">DataTables</a> che permette di visualizzare i dati in modo “tabella” come semplice input, lasciando alla libreria la creazione degli stili, dei filtri, l’ordinamento e il paging.<br /><a href="http://www.cityplanner.it/wp-content/uploads/2015/09/20150912_Selezione_005.jpg"><img alt="MatriceOD DataTables jQuery" class="aligncenter size-full wp-image-5205" src="http://www.cityplanner.it/wp-content/uploads/2015/09/20150912_Selezione_005.jpg" width="100%" /></a>Ho inserito il tutto nel mio nuovo sistema <a href="http://www.cityplanner.it/creare-un-webgis-versione-0-1/" target="_blank">WebGIS v.0.1</a> e funziona perfettamente.<br /><strong><a class="wc-shortcodes-button wc-shortcodes-button-primary wc-shortcodes-button-position-float" href="http://www.cityplanner.it/wp_pulito/webgis/grafo-od2014/" target="_self" title="Guarda mappa">Provalo subito la mappa</a></strong></p>
<ul><li>
		SOCRATA: <a href="http://dev.socrata.com/foundry/#/www.dati.lombardia.it/wbii-r5a6">http://dev.socrata.com/foundry/#/www.dati.lombardia.it/wbii-r5a6</a></li>
<li>
		10 Tips for Optimizing MySQL Queries: <a href="http://20bits.com/article/10-tips-for-optimizing-mysql-queries-that-dont-suck">http://20bits.com/article/10-tips-for-optimizing-mysql-queries-that-dont...</a></li>
</ul></div></div></div><span property="dc:title" content="C’è chi va e c’è chi viene: matrice origine-destinazione" class="rdf-meta element-hidden"></span>
      <footer>
            <ul class="links list-inline"><li class="blog_usernames_blog first"><a href="/blogs/pjhooker" title="Leggi gli ultimi post del blog di pjhooker">Blog di pjhooker</a></li>
<li class="comment_forbidden last"><span><a href="/user/login?destination=node/207%23comment-form">Accedi</a> o <a href="/user/register?destination=node/207%23comment-form">registrati</a> per inserire commenti.</span></li>
</ul>    </footer>
  
  
</article> <!-- /.node -->

</section> <!-- /.block -->
  </div>
    </section>

    
  </div>
</div>
<footer class="footer container">
  </footer>
  <script src="http://www.spaghettiopendata.org/sites/default/files/js/js_B2uv6dkjoYobfQVyuXdchgrpnnx4oM0TkP_bDVf8Qrg.js"></script>
</body>
</html>
